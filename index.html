<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/正则表达式/" class="article-date">
  <time datetime="2019-03-13T10:27:04.205Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><ul>
<li>**smiling eyes</li>
<li>**9 Minutes</li>
<li>**November 4, 2017</li>
</ul>
<blockquote>
<p>对于正则表达式，第一眼都觉得很难，甚至不想去看它，觉得完全没有规律可寻，而且全是一堆各种各样的特殊符号，完全不知所云。</p>
</blockquote>
<p>下面将详细介绍：</p>
<h3 id="一-什么是正则表达式"><a href="#一-什么是正则表达式" class="headerlink" title="一.什么是正则表达式"></a>一.什么是正则表达式</h3><blockquote>
<p> 正则表达式是一种特殊的字符串模式，用于匹配一组字符串，就好比用模具做产品，而正则就是这个模具，定义一种规则去匹配符合规则的字符。</p>
</blockquote>
<h3 id="二-正则表达式有什么用"><a href="#二-正则表达式有什么用" class="headerlink" title="二.正则表达式有什么用"></a>二.正则表达式有什么用</h3><ul>
<li><p>测试字符串内的模式。<br>例如，可以测试输入字符串，以查看字符串内是否出现电话号码模式或信用卡号码模式。这称为数据验证。</p>
</li>
<li><p>替换文本。<br>可以使用正则表达式来识别文档中的特定文本，完全删除该文本或者用其他文本替换它。</p>
</li>
<li><p>基于模式匹配从字符串中提取子字符串。<br>可以查找文档内或输入域内特定的文本。</p>
<blockquote>
<p>例如，您可能需要搜索整个网站，删除过时的材料，以及替换某些 HTML 格式标记。在这种情况下，可以使用正则表达式来确定在每个文件中是否出现该材料或该 HTML 格式标记。此过程将受影响的文件列表缩小到包含需要删除或更改的材料的那些文件。然后可以使用正则表达式来删除过时的材料。最后，可以使用正则表达式来搜索和替换标记。</p>
</blockquote>
</li>
</ul>
<h3 id="三-正则字符介绍"><a href="#三-正则字符介绍" class="headerlink" title="三.正则字符介绍"></a>三.<strong>正则字符介绍</strong></h3><h4 id="1-元字符介绍"><a href="#1-元字符介绍" class="headerlink" title="1.元字符介绍"></a>1.元字符介绍</h4><blockquote>
<p><strong>“^”</strong> ：^会匹配行或者字符串的起始位置，有时还会匹配整个文档的起始位置。 当在一组方括号里使用^是，它表示”非”或”排除”的意思，常常用来剔除某个字符。</p>
<p><strong>“$”</strong> ：$会匹配行或字符串的结尾。</p>
</blockquote>
<h4 id="2-限定符"><a href="#2-限定符" class="headerlink" title="2.限定符"></a>2.限定符</h4><table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>匹配前面的子表达式零次或多次。例如，zo<em> 能匹配 “z” 以及 “zoo”。</em> 等价于{0,}。</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td>
</tr>
<tr>
<td>?</td>
<td>匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 或 “does” 中的 “does” 或 “doxy” 中的 “do” 。? 等价于 {0,1}。</td>
</tr>
<tr>
<td>{n}</td>
<td>n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td>
</tr>
<tr>
<td>{n,}</td>
<td>n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’。</td>
</tr>
<tr>
<td>{n,m}</td>
<td>m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，”o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td>
</tr>
</tbody>
</table>
<p><strong>*、+限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个?就可以实现非贪婪或最小匹配。</strong></p>
<h4 id="4-确定重复出现"><a href="#4-确定重复出现" class="headerlink" title="4.确定重复出现"></a>4.确定重复出现</h4><p>一个数字 {x} 的意思是<strong>前面的字符或字符簇只出现x次</strong> ；一个数字加逗号 {x,} 的意思是<strong>前面的内容出现x或更多的次数</strong> ；两个数字用逗号分隔的数字 {x,y} 表示 <strong>前面的内容至少出现x次，但不超过y次</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">^[a-zA-Z0-9_]&#123;1,&#125;$      // 所有包含一个以上的字母、数字或下划线的字符串 </span><br><span class="line">^[1-9][0-9]&#123;0,&#125;$        // 所有的正整数 </span><br><span class="line">^\-&#123;0,1&#125;[0-9]&#123;1,&#125;$      // 所有的整数 </span><br><span class="line">^[-]?[0-9]+\.?[0-9]+$   // 所有的浮点数</span><br></pre></td></tr></table></figure>
<p>特殊字符 <em>与 {0,} 是相等的，它们都代表着 **0 个或多个前面的内容** 。最后，字符 + 与 {1,} 是相等的，表示 </em>1 个或多个前面的内容* ，所以上面的4个例子可以写成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">^[a-zA-Z0-9_]+$      // 所有包含一个以上的字母、数字或下划线的字符串 </span><br><span class="line">^[1-9][0-9]*$        // 所有的正整数 </span><br><span class="line">^\-?[0-9]+$          // 所有的整数 </span><br><span class="line">^\-?[0-9]+\.?[0-9]*$ // 所有的浮点数</span><br></pre></td></tr></table></figure>
<h3 id="四-方法"><a href="#四-方法" class="headerlink" title="四.方法"></a>四.方法</h3><p><code>reg.test(str)</code> 判断字符串是否全是字母或数字</p>
<p><code>str.replace(/[^0-9]+/ig,&quot;&quot;)</code>将字符串转换为数字</p>
<p><code>str.replace（/[^a-z]+/ig,&quot;&quot;）</code>将字符串转换为纯字母</p>
<p>示例：把集合中相同的元素统计出数量，</p>
<p>collection = [ “a”, “a”, “a”,</p>
<p> “e”, “e”, “e”, “e”, “e”, “e”, “e”,</p>
<p> “h”, “h”, “h”, “h”, “h”, “h”, “h[3]”, “h”, “h”,</p>
<p> “t”, “t-2”, “t”, “t”, “t”, “t”, “t”, “t”, “t[10]”,</p>
<p> “f”, “f”, “f”, “f”, “f”, “f”, “f”, “f”, “f”,</p>
<p> “c:8”,</p>
<p> “g”, “g”, “g”, “g”, “g”, “g”, “g”,</p>
<p> “b”, “b”, “b”, “b”, “b”, “b”,</p>
<p> “d-5”</p>
<p> ]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">//判断字符串str是否是纯字符元素</span><br><span class="line">function isAllChar(str)&#123;</span><br><span class="line">  let reg = /^[a-z]+$/;</span><br><span class="line">  if(reg.test(str))&#123;</span><br><span class="line">    return true;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//把集合collection中相同的元素统计出数量，存入对象数组arr</span><br><span class="line">function count(collection,arr)&#123;</span><br><span class="line">  let obj = &#123;&#125;;  </span><br><span class="line">  let regNum = /[^0-9]+/ig;</span><br><span class="line">  let regChar = /[^a-z]+/ig;</span><br><span class="line">  let sum,name;</span><br><span class="line">  for(let item of collection)&#123;</span><br><span class="line">    if(isAllChar(item))&#123;</span><br><span class="line">      sum = 1;</span><br><span class="line">      name=item;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      sum = parseInt(item.replace(regNum,&quot;&quot;));</span><br><span class="line">      name = item.replace(regChar,&quot;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    if(!obj[name])&#123;</span><br><span class="line">      obj[name] = &#123;&#125;;</span><br><span class="line">      obj[name].name = name;</span><br><span class="line">      obj[name].summary = sum;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      obj[name].summary =obj[name].summary+sum;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  for(let item in obj)&#123;</span><br><span class="line">    arr.push(obj[item]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function count_same_elements(collection) &#123;</span><br><span class="line">  let result = [];</span><br><span class="line">  count(collection,result);</span><br><span class="line">  cosole.log(result);</span><br><span class="line">  return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*输出结果为[</span><br><span class="line">      &#123;name: &quot;a&quot;, summary: 3&#125;,</span><br><span class="line">      &#123;name: &quot;e&quot;, summary: 7&#125;,</span><br><span class="line">      &#123;name: &quot;h&quot;, summary: 11&#125;,</span><br><span class="line">      &#123;name: &quot;t&quot;, summary: 19&#125;,</span><br><span class="line">      &#123;name: &quot;f&quot;, summary: 9&#125;,</span><br><span class="line">      &#123;name: &quot;c&quot;, summary: 8&#125;,</span><br><span class="line">      &#123;name: &quot;g&quot;, summary: 7&#125;,</span><br><span class="line">      &#123;name: &quot;b&quot;, summary: 6&#125;,</span><br><span class="line">      &#123;name: &quot;d&quot;, summary: 5&#125;</span><br><span class="line">    ]*/</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/正则表达式/" data-id="cjt72ufdi000f44varp8durw0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数组去重" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/数组去重/" class="article-date">
  <time datetime="2019-03-13T10:27:04.203Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h1><ul>
<li>**smiling eyes</li>
<li>**3 Minutes</li>
<li>**November 4, 2017</li>
</ul>
<h4 id="1-filter"><a href="#1-filter" class="headerlink" title="1.filter"></a>1.filter</h4><p>如果一个数组只包含原始变量，我们可以使用filter和indexOf方法将其去重：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var deduped = [ 1, 1, ‘a’, ‘a’ ].filter(function (el, i, arr) &#123;</span><br><span class="line"></span><br><span class="line">return arr.indexOf(el) === i;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(deduped); // [ 1, ‘a’ ]</span><br></pre></td></tr></table></figure>
<p>我们可以使用箭头函数使写法更简明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var deduped = [ 1, 1, ‘a’, ‘a’ ].filter( (el, i, arr) =&gt; arr.indexOf(el) === i);</span><br><span class="line"></span><br><span class="line">console.log(deduped); // [ 1, ‘a’ ]</span><br></pre></td></tr></table></figure>
<h4 id="2-Sets和from方法-ES6"><a href="#2-Sets和from方法-ES6" class="headerlink" title="2.Sets和from方法(ES6)"></a>2.Sets和from方法(ES6)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var deduped = Array.from( new Set([ 1, 1, ‘a’, ‘a’ ]) );</span><br><span class="line"></span><br><span class="line">console.log(deduped); // [ 1, ‘a’ ]</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...new Set(collection)]</span><br></pre></td></tr></table></figure>
<h4 id="3-利用对象"><a href="#3-利用对象" class="headerlink" title="3.利用对象"></a>3.利用对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123;&#125;;</span><br><span class="line">let deduped = [ 1, 1, ‘a’, ‘a’ ].filter(function(el)&#123;</span><br><span class="line">if(!obj[el])&#123;</span><br><span class="line">    obj[el]=1;</span><br><span class="line">    return el;</span><br><span class="line">&#125;)</span><br><span class="line">console.log(deduped); // [ 1, ‘a’ ]</span><br></pre></td></tr></table></figure>
<h4 id="4-简单的includes方法"><a href="#4-简单的includes方法" class="headerlink" title="4.简单的includes方法"></a>4.简单的includes方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let arr=[];</span><br><span class="line">  for(let num of collection)&#123;</span><br><span class="line">    if(!arr.includes(num))</span><br><span class="line">      arr.push(num);</span><br><span class="line">  &#125;</span><br><span class="line">  return arr;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/数组去重/" data-id="cjt72ufdh000e44vaw8rzmuwt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-三种标签元素的区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/三种标签元素的区别/" class="article-date">
  <time datetime="2019-03-13T10:27:04.201Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="三种标签元素的区别"><a href="#三种标签元素的区别" class="headerlink" title="三种标签元素的区别"></a>三种标签元素的区别</h1><ul>
<li>**smiling eyes</li>
<li>**1 Minutes</li>
<li>**November 4, 2017</li>
</ul>
<h4 id="三种标签元素的区别与特点："><a href="#三种标签元素的区别与特点：" class="headerlink" title="三种标签元素的区别与特点："></a>三种标签元素的区别与特点：</h4><h5 id="块元素"><a href="#块元素" class="headerlink" title="块元素"></a>块元素</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div,ul,li,dl,dt,dd,p,h1-h6,blockquote</span><br></pre></td></tr></table></figure>
<p>块级元素的特点：</p>
<ul>
<li>总在新行上开始，占据一整行</li>
<li>默认情况下，其宽度自动填满其父元素宽度</li>
<li>宽度始终是与浏览器宽度一样，与内容无关</li>
<li>它可以容纳内联元素和其他块元素</li>
<li>display属性为block</li>
<li>块级元素的垂直相邻外边距margin会合并。</li>
</ul>
<h5 id="内联元素"><a href="#内联元素" class="headerlink" title="内联元素"></a>内联元素</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a,b,span,img,input,strong,select,label,em,button,textarea</span><br></pre></td></tr></table></figure>
<p>内联元素的特点：</p>
<ul>
<li>和其他元素都在一行上</li>
<li>高，行高及外边距和内边距部分可改变</li>
<li>宽度只与内容有关</li>
<li>行内元素只能容纳文本或者其他行内元素</li>
<li>display属性为inline</li>
<li>水平方向的padding-left、padding-right、margin-left、margin-right都产生边距效果，但竖直方向的padding-top、padding-bottom、margin-top、margin-bottom却不会产生边距效果。</li>
<li>不可以设置宽高，其宽度随着内容增加，高度随字体大小而改变，内联元素可以设置外边界，但是外边界不对上下起作用，只能对左右起作用。</li>
</ul>
<h5 id="空元素"><a href="#空元素" class="headerlink" title="空元素"></a>空元素</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">br,meta,hr,link,input,img</span><br></pre></td></tr></table></figure>
<p>空元素的特点：</p>
<ul>
<li>没有内容的 HTML 内容被称为空元素。空元素是在开始标签中关闭的。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/三种标签元素的区别/" data-id="cjt72ufd2000944va2yvwqaak" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-模块接口module.exports和require" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/模块接口module.exports和require/" class="article-date">
  <time datetime="2019-03-13T10:27:04.199Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="模块接口module-exports和require"><a href="#模块接口module-exports和require" class="headerlink" title="模块接口module.exports和require"></a>模块接口module.exports和require</h1><ul>
<li>**smiling eyes</li>
<li>**5 Minutes</li>
<li>**April 10, 2018</li>
</ul>
<h3 id="Node-js-中的模块接口-module-exports-的使用方法"><a href="#Node-js-中的模块接口-module-exports-的使用方法" class="headerlink" title="Node.js 中的模块接口 module.exports 的使用方法"></a>Node.js 中的模块接口 module.exports 的使用方法</h3><p>在 nodejs 中，提供了 exports 和 require 两个对象，其中 exports 是模块公开的接口，你可以用它来创建你的模块 ; require 用于从外部获取一个模块的接口(也就是获取模块的 exports 对象).</p>
<p>require 函数使用一个参数, 参数值可以带有完整路径的模块的文件名,也可以为模块名.当使用 node 中提供的模块时,在 require 函数中只需要指定模块名即可.</p>
<h4 id="一-返回一个普通函数"><a href="#一-返回一个普通函数" class="headerlink" title="一 . 返回一个普通函数"></a>一 . 返回一个普通函数</h4><p>我们创建了一个 app.js 文件,需要在 main.js 中引用它,于是在 app.js 同级目录新建了一个 main.js 文件</p>
<p><strong>app.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function add(a,b)&#123;</span><br><span class="line">    return a+b;</span><br><span class="line">&#125;</span><br><span class="line">module.exports=add;</span><br></pre></td></tr></table></figure>
<p><strong>main.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let addSum=require(&apos;./app&apos;);</span><br><span class="line"></span><br><span class="line">function main()&#123;</span><br><span class="line"></span><br><span class="line">    let sum = addSum(1,2);</span><br><span class="line">    console.log(sum);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();//3</span><br></pre></td></tr></table></figure>
<h4 id="二-中的这种方式还可以用于返回几个-require-的其他模块，可以实现一次-require-多个模块"><a href="#二-中的这种方式还可以用于返回几个-require-的其他模块，可以实现一次-require-多个模块" class="headerlink" title="二. 中的这种方式还可以用于返回几个 require 的其他模块，可以实现一次 require 多个模块"></a>二. 中的这种方式还可以用于返回几个 require 的其他模块，可以实现一次 require 多个模块</h4><p><strong>module_collection.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var module_collection = &#123;</span><br><span class="line"></span><br><span class="line">    &quot;module1&quot;: require(&quot;./module1&quot;),</span><br><span class="line">    &quot;module2&quot;: require(&quot;./module2&quot;),</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports = module_collection;</span><br></pre></td></tr></table></figure>
<p><strong>main.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let module_collection = require(&quot;./module_collection&quot;);</span><br><span class="line"></span><br><span class="line">let module1 = module_collection.module1;</span><br><span class="line"></span><br><span class="line">let module2 = module_collection.module2;</span><br><span class="line"></span><br><span class="line"> // Do something with module1 and module2</span><br></pre></td></tr></table></figure>
<h4 id="三-用这种方式返回几个函数"><a href="#三-用这种方式返回几个函数" class="headerlink" title="三 . 用这种方式返回几个函数"></a>三 . 用这种方式返回几个函数</h4><p><strong>functions.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let func1 = function() &#123;</span><br><span class="line"></span><br><span class="line">    console.log(&quot;func1&quot;);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">let func2 = function() &#123;</span><br><span class="line"></span><br><span class="line">    console.log(&quot;func2&quot;);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">exports.function1 = func1;</span><br><span class="line"></span><br><span class="line">exports.function2 = func2;</span><br></pre></td></tr></table></figure>
<p><strong>main.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let functions = require(&quot;./functions&quot;);</span><br><span class="line"></span><br><span class="line">functions.function1();</span><br><span class="line"></span><br><span class="line">functions.function2();</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/模块接口module.exports和require/" data-id="cjt72ufdg000d44valdkh81w0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-编译运行" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/编译运行/" class="article-date">
  <time datetime="2019-03-13T10:27:04.197Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ctrl+ ~进入命令</p>
<p>cd 进入下一目录</p>
<p>cd.. 进入上一目录</p>
<p>npm install 安装包</p>
<p>npm test  测试</p>
<p>node.文件名  运行</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/编译运行/" data-id="cjt72ufde000c44vaefn0xtk2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-把数组的第一个元素放到末尾+数组扁平化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/把数组的第一个元素放到末尾+数组扁平化/" class="article-date">
  <time datetime="2019-03-13T10:27:04.194Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="把数组的第一个元素放到末尾-数组扁平化"><a href="#把数组的第一个元素放到末尾-数组扁平化" class="headerlink" title="把数组的第一个元素放到末尾+数组扁平化"></a>把数组的第一个元素放到末尾+数组扁平化</h1><ul>
<li>**smiling eyes</li>
<li>**3 Minutes</li>
<li>**October 31, 2017</li>
</ul>
<p>例：两大一小排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">let collection=[ 1, 2, 3, 4, 6, 8, 9, 10 ];</span><br><span class="line">//创建一个二维数组</span><br><span class="line">let arr=[];</span><br><span class="line">for(let i=0;i&lt;collection.length/3;i++)&#123;</span><br><span class="line">  arr[i]=[];</span><br><span class="line">&#125;</span><br><span class="line">//三个为一组存入新数组</span><br><span class="line">for(let item of collection)&#123;</span><br><span class="line">  arr[parseInt(collection.indexOf(item)/3)].push(item);</span><br><span class="line">&#125;            //此时arr=[ [1, 2, 3], [4, 6, 8], [9,10] ]</span><br><span class="line">//把数组的第一个元素放到末尾</span><br><span class="line">for(let item of arr)&#123;</span><br><span class="line">  if(item.length==3)&#123;</span><br><span class="line">    let dele_value=item.shift();  //移除数组第一个元素，并返回</span><br><span class="line">    item.push(dele_value);    //将移除的元素再添加到数组末尾</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//数组扁平化</span><br><span class="line">let result=arr.reduce(function(a,b)&#123;</span><br><span class="line">  return a.concat(b);</span><br><span class="line">&#125;,[]);</span><br><span class="line">return result;  //返回[ 2, 3, 1, 6, 8, 4, 9, 10 ]</span><br></pre></td></tr></table></figure>
<p>补充：</p>
<p>将一个元素添加到数组前头</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.unshift(value);</span><br></pre></td></tr></table></figure>
<p>移除数组第一个元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.shift();</span><br></pre></td></tr></table></figure>
<p>数组扁平化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//arr为一个二维数组，扁平化为一维数组存入result中</span><br><span class="line">let result=arr.reduce(function(a,b)&#123;</span><br><span class="line">    return a.concat(b);</span><br><span class="line">&#125;,[]);</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/把数组的第一个元素放到末尾+数组扁平化/" data-id="cjt72ufdd000b44vacf7vyfsq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-parseInt()" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/parseInt()/" class="article-date">
  <time datetime="2019-03-13T10:27:04.191Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="parseInt"><a href="#parseInt" class="headerlink" title="parseInt()"></a>parseInt()</h1><ul>
<li>**smiling eyes</li>
<li>**1 Minutes</li>
<li>**April 10, 2018</li>
</ul>
<p>parseInt()函数可解析一个字符串，并返回一个整数.如果第一个字符不是数字，会打印出NaN,若是字符和数字一起，并且数字在前，会打印数字忽略字母</p>
<p>parseInt()方法：</p>
<p> 首先想到的是js提供的parseInt方法，例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var str =&quot;4500元&quot;;</span><br><span class="line"></span><br><span class="line">var num = parseInt(str);</span><br><span class="line"></span><br><span class="line">alert(num);//4500</span><br></pre></td></tr></table></figure>
<p> 结果就是我们想要的， 以为就这么简单，那就错了。如果字符串前面有非数字字符，上面这种方法就不行了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var str =&quot;价格：4500元&quot;;</span><br><span class="line"></span><br><span class="line">var num = parseInt(str);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">alert(num);//NaN</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/parseInt()/" data-id="cjt72ufd0000744va2nk05q59" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-node+express实现个性化聊天室" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/node+express实现个性化聊天室/" class="article-date">
  <time datetime="2019-03-13T10:27:04.189Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="node-express实现个性化聊天室"><a href="#node-express实现个性化聊天室" class="headerlink" title="node+express实现个性化聊天室"></a>node+express实现个性化聊天室</h1><ul>
<li>**smiling eyes</li>
<li>**27 Minutes</li>
<li>**April 10, 2018</li>
</ul>
<h2 id="实现功能"><a href="#实现功能" class="headerlink" title="实现功能"></a>实现功能</h2><ul>
<li>登录检测</li>
<li>系统自动提示用户状态（进入/离开）</li>
<li>显示在线用户</li>
<li>支持发送和接收消息</li>
<li>自定义字体颜色</li>
<li>支持发送表情</li>
<li>支持发送图片</li>
</ul>
<h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><p><a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.liaoxuefeng.com%2Fwiki%2F001434446689867b27157e896e74d51a89c25cc8b43bdb3000%2F001434501245426ad4b91f2b880464ba876a8e3043fc8ef000" target="_blank" rel="noopener">node及npm环境</a>、<a href="https://link.juejin.im/?target=http%3A%2F%2Fwww.expressjs.com.cn%2F4x%2Fapi.html" target="_blank" rel="noopener">express</a>、<a href="https://link.juejin.im/?target=https%3A%2F%2Fsocket.io%2F" target="_blank" rel="noopener">socket.io</a></p>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><p><strong>1、将聊天室部署到服务器</strong></p>
<p>先用node搭建一个服务器，部署在localhost:3000端口，先尝试向浏览器发送一个“Hello”，新建server.js文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let express = require(&apos;express&apos;);//引入express模块</span><br><span class="line">let app = express();</span><br><span class="line">let http = require(&apos;http&apos;).Server(app);</span><br><span class="line"></span><br><span class="line">//路由为localhost:3000时向客户端响应&quot;Hello&quot;</span><br><span class="line">app.get(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">    res.send(&apos;&lt;h1&gt;Hello&lt;/h1&gt;&apos;);//发送数据</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//监听3000端口</span><br><span class="line">http.listen(3000,function()&#123;</span><br><span class="line">    console.log(&quot;3000端口启动&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>安装express模块：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#安装express模块</span><br><span class="line">npm install --save express</span><br></pre></td></tr></table></figure>
<p>一个node服务器搭建成功。</p>
<p>在chatRoom目录下启动服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure>
<p>打开浏览器输入网址：localhost:3000是这样的</p>
<p><a href="https://github.com/syq1035/syq1035.github.io/blob/master/img/3000-chatRoom.jpg" target="_blank" rel="noopener">3000</a></p>
<p>新建文件夹client (css, js, image)，</p>
<p>在server.js里添加代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 路由为/默认client静态文件夹</span><br><span class="line">app.use(&apos;/&apos;, express.static(__dirname + &apos;/client&apos;));</span><br></pre></td></tr></table></figure>
<p>修改:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">    res.send(index);//发送数据</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>express.static(__dirname + ‘/client’)是将www文件夹托管为静态资源，意味着这个文件夹里的文件（html、css、js）彼此可以用相对路径。</p>
<p>在client下新建index.html以及相应的css文件(此处不粘贴)，该页面用了font-awesome小图标</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;title&gt;chatRoom&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/index.css&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/font-awesome-4.7.0/css/font-awesome.min.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;all&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;name&quot;&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; id=&quot;name&quot; placeholder=&quot;请输入昵称···&quot;&gt;</span><br><span class="line">            &lt;button id=&quot;nameBtn&quot;&gt;确定&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">                &lt;img src=&quot;image/logo.jpeg&quot;&gt;</span><br><span class="line">                秘密聊天室</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;conversation&quot;&gt;</span><br><span class="line">                    &lt;ul id=&quot;messages&quot;&gt;&lt;/ul&gt;</span><br><span class="line">                    &lt;form action=&quot;&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;edit&quot;&gt;</span><br><span class="line">                            &lt;input type=&quot;color&quot; id=&quot;color&quot; value=&quot;#000000&quot;&gt;</span><br><span class="line">                            &lt;i title=&quot;双击取消选择&quot; class=&quot;fa fa-smile-o&quot; id=&quot;smile&quot;&gt;&lt;/i&gt;</span><br><span class="line">                            &lt;i title=&quot;双击取消选择&quot; class=&quot;fa fa-picture-o&quot; id=&quot;img&quot;&gt;&lt;/i&gt;</span><br><span class="line">                            &lt;div class=&quot;selectBox&quot;&gt;</span><br><span class="line">                                &lt;div class=&quot;smile&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;img&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;textarea id=&quot;m&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">                        &lt;button class=&quot;btn rBtn&quot; id=&quot;sub&quot;&gt;发送&lt;/button&gt;</span><br><span class="line">                        &lt;button class=&quot;btn&quot; id=&quot;clear&quot;&gt;关闭&lt;/button&gt;</span><br><span class="line">                    &lt;/form&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;contacts&quot;&gt;</span><br><span class="line">                    &lt;h1&gt;在线成员&lt;span id=&quot;num&quot;&gt;0&lt;/span&gt;&lt;/h1&gt;</span><br><span class="line">                    &lt;ul id=&quot;users&quot;&gt;&lt;/ul&gt;</span><br><span class="line">                    &lt;p&gt;当前无好友在线！&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>打开localhost:3000，看到如下页面：</p>
<p><a href="https://github.com/syq1035/syq1035.github.io/blob/master/img/page-chatRoom.png" target="_blank" rel="noopener">page</a></p>
<p>聊天室部署成功。</p>
<p><strong>2、检测登录</strong></p>
<p>在客户端和服务器之间传送消息需要用到socket.io</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//安装socket.io模块</span><br><span class="line">npm install --save socket.io</span><br></pre></td></tr></table></figure>
<p>server.js 做如下修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let app = express();</span><br><span class="line">let http = require(&apos;http&apos;).Server(app);</span><br><span class="line">let io = require(&apos;socket.io&apos;)(http);</span><br><span class="line"></span><br><span class="line">// 路由为/默认client静态文件夹</span><br><span class="line">app.use(&apos;/&apos;, express.static(__dirname + &apos;/client&apos;));</span><br><span class="line"></span><br><span class="line">io.on(&apos;connection&apos;,function (socket) &#123;</span><br><span class="line">    console.log(&apos;a user connected&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当打开localhost:3000的时候会触发服务器端io的connection事件，会在服务器打印“a user connected”，但是我们想统计一下连接该服务器的用户人数，如果有用户连接就打印“n users connected”，n为用户人数，怎么办呢？</p>
<p>在server.js设置一个全局数组为user，每当一个用户连接成功就在连接事件中将用户的昵称push进user，打印user.length即可知道已成功连接用户的人数。</p>
<p>在用户连接的时输入昵称登录，我们应该检测一下用户的昵称是否已存在，避免昵称相同的情况发生，在服务器监听一个登录事件来判断该情况，由于一切都发生在用户连接之后，所以触发事件应该写在connection事件的回调函数中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">io.on(&apos;connection&apos;,function (socket) &#123;</span><br><span class="line">    //渲染在线人员</span><br><span class="line">    io.emit(&apos;disUser&apos;,usersInfo);</span><br><span class="line"></span><br><span class="line">    //登录，检测用户名</span><br><span class="line">    socket.on(&apos;login&apos;,(user)=&gt;&#123;</span><br><span class="line">        if(user.indexOf(user.name)&gt;-1)&#123;    //判断昵称是否存在</span><br><span class="line">            socket.emit(&apos;loginError&apos;);    //触发客户端的登录失败事件</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            users.push(user.name);    //存储用户昵称</span><br><span class="line">            usersInfo.push(user);    //存储用户的昵称和头像</span><br><span class="line">            socket.emit(&apos;loginSuc&apos;);   //触发客户端的登录成功事件</span><br><span class="line">            socket.nickname = user.name;</span><br><span class="line">            io.emit(&apos;system&apos;,&#123;        //向所有用户广播该用户进入房间</span><br><span class="line">                name:user.name,</span><br><span class="line">                status:&apos;进入&apos;</span><br><span class="line">            &#125;);</span><br><span class="line">            io.emit(&apos;disUser&apos;,usersInfo);   //渲染右侧在线人员信息</span><br><span class="line">            console.log(users.length + &apos;user connect&apos;);   //打印连接人数</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这里区分一下 io.emit(foo)、socket.emit(foo)、socket.broadcast.emit(foo)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">io.emit(foo);   //会触发所有客户端用户的foo事件</span><br><span class="line">socket.emit(foo);   //只触发当前客户端用户的foo事件</span><br><span class="line">socket.broadcast.emit(foo);   //触发除了当前客户端用户的其他用户的foo事件</span><br></pre></td></tr></table></figure>
<p>客户端代码client.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$(function () &#123;</span><br><span class="line">    // io-client</span><br><span class="line">    // 连接成功会触发服务器端的connection事件</span><br><span class="line">    var socket = io();</span><br><span class="line"></span><br><span class="line">    // 点击输入昵称，回车登录</span><br><span class="line">    $(&apos;#name&apos;).keyup((ev)=&gt; &#123;</span><br><span class="line">        if(ev.which == 13) &#123;</span><br><span class="line">            inputName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(&apos;#nameBtn&apos;).click(inputName);</span><br><span class="line">    // 登录成功，隐藏登录层</span><br><span class="line">    socket.on(&apos;loginSuc&apos;, ()=&gt; &#123;</span><br><span class="line">        $(&apos;.name&apos;).hide();</span><br><span class="line">    &#125;)</span><br><span class="line">    socket.on(&apos;loginError&apos;, ()=&gt; &#123;</span><br><span class="line">        alert(&apos;用户名已存在，请重新输入！&apos;);</span><br><span class="line">        $(&apos;#name&apos;).val(&apos;&apos;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    function inputName() &#123;</span><br><span class="line">        var imgN = Math.floor(Math.random()*4)+1; // 随机分配头像</span><br><span class="line">        if($(&apos;#name&apos;).val().trim()!==&apos;&apos;)</span><br><span class="line">            socket.emit(&apos;login&apos;, &#123;</span><br><span class="line">                name: $(&apos;#name&apos;).val(),</span><br><span class="line">                img: &apos;image/user&apos; + imgN + &apos;.jpg&apos;</span><br><span class="line">            &#125;);  // 触发登录事件</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>3、系统自动提示用户状态（进入/离开）</strong></p>
<p>该功能是为了实现上图所示的系统提示“XXX进入聊天室”，在登录成功时触发system事件，向所有用户广播信息，注意此时用的是io.emit而不是socket.emit，客户端client.js代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 系统提示消息</span><br><span class="line">socket.on(&apos;system&apos;, (user)=&gt; &#123; </span><br><span class="line">  var data = new Date().toTimeString().substr(0, 8);</span><br><span class="line">  $(&apos;#messages&apos;).append(`&lt;p class=&apos;system&apos;&gt;&lt;span&gt;$&#123;data&#125;&lt;/span&gt;&lt;br /&gt;&lt;span&gt;$&#123;user.name&#125;  $&#123;user.status&#125;了聊天室&lt;span&gt;&lt;/p&gt;`);</span><br><span class="line">  // 滚动条总是在最底部</span><br><span class="line">  $(&apos;#messages&apos;).scrollTop($(&apos;#messages&apos;)[0].scrollHeight);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>4、显示在线用户</strong></p>
<p>客户端监听一个显示在线用户的事件disUser，在以下三个时间段服务器端就触发一次该事件重新渲染一次</p>
<ul>
<li><p>程序开始启动时</p>
</li>
<li><p>每当用户进入房间</p>
</li>
<li><p>每当用户离开房间</p>
<p>客户端client.js代码如下：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//显示在线人员</span><br><span class="line">   socket.on(&apos;disUser&apos;,(usersInfo)=&gt;&#123;</span><br><span class="line">       displayUser(usersInfo);</span><br><span class="line">   &#125;);</span><br><span class="line">   function displayUser(users) &#123;</span><br><span class="line">       $(&apos;#users&apos;).text(&apos;&apos;);   // 每次都要重新渲染</span><br><span class="line">       if(!users.length)&#123;</span><br><span class="line">           $(&apos;.contacts p&apos;).show();</span><br><span class="line">       &#125;else &#123;</span><br><span class="line">           $(&apos;.contacts p&apos;).hide();</span><br><span class="line">       &#125;</span><br><span class="line">       $(&apos;#num&apos;).text(users.length);</span><br><span class="line">       for(var i = 0; i &lt; users.length; i++) &#123;</span><br><span class="line">           var $html = `&lt;li&gt;</span><br><span class="line">               &lt;img src=&quot;$&#123;users[i].img&#125;&quot;&gt;</span><br><span class="line">               &lt;span&gt;$&#123;users[i].name&#125;&lt;/span&gt;</span><br><span class="line">           &lt;/li&gt;`;</span><br><span class="line">           $(&apos;#users&apos;).append($html);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>登录成功后，可看到如下页面</p>
<p><a href="https://github.com/syq1035/syq1035.github.io/blob/master/img/login-chatRoom.png" target="_blank" rel="noopener">login</a></p>
<p><strong>5、支持发送和接收消息</strong></p>
<p>用户发送消息时触发服务器端的sendMsg事件，并将消息内容作为参数，服务器端监听到sendMsg事件之后向其他所有用户广播该消息，用的socket.broadcast.emit(foo) , 以下为server.js代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 发送消息事件</span><br><span class="line">   socket.on(&apos;sendMsg&apos;, (data)=&gt; &#123;</span><br><span class="line">       var img = &apos;&apos;;</span><br><span class="line">       for(var i = 0; i &lt; usersInfo.length; i++) &#123;</span><br><span class="line">           if(usersInfo[i].name == socket.nickname) &#123;</span><br><span class="line">               img = usersInfo[i].img;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       socket.broadcast.emit(&apos;receiveMsg&apos;, &#123;</span><br><span class="line">           name: socket.nickname,</span><br><span class="line">           img: img,</span><br><span class="line">           msg: data.msg,</span><br><span class="line">           color: data.color,</span><br><span class="line">           type: data.type,</span><br><span class="line">           side: &apos;left&apos;</span><br><span class="line">       &#125;);</span><br><span class="line">       socket.emit(&apos;receiveMsg&apos;, &#123;</span><br><span class="line">           name: socket.nickname,</span><br><span class="line">           img: img,</span><br><span class="line">           msg: data.msg,</span><br><span class="line">           color: data.color,</span><br><span class="line">           type: data.type,</span><br><span class="line">           side: &apos;right&apos;</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>
<p>服务器端接受到来自用户的消息后会触发客户端的receiveMsg事件，并将用户发送的消息作为参数传递，该事件会向聊天面板添加聊天内容 , 以下为client.js代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">//点击按钮或回车键发送消息</span><br><span class="line">    $(&apos;#sub&apos;).click(sendMsg);</span><br><span class="line">    $(&apos;#m&apos;).keyup((ev)=&gt;&#123;</span><br><span class="line">        if(ev.which ==13)&#123;</span><br><span class="line">            sendMsg();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    //发送消息</span><br><span class="line">    function sendMsg() &#123;</span><br><span class="line">        if($(&apos;#m&apos;).val()==&apos;&apos;)&#123;</span><br><span class="line">            alert(&apos;请输入内容！&apos;);</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        socket.emit(&apos;sendMsg&apos;,&#123;</span><br><span class="line">            msg:$(&apos;#m&apos;).val()</span><br><span class="line">        &#125;);</span><br><span class="line">        $(&apos;#m&apos;).val(&apos;&apos;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //接收消息</span><br><span class="line">    socket.on(&apos;receiveMsg&apos;,(obj)=&gt;&#123;</span><br><span class="line">        $(&apos;#messages&apos;).append(`</span><br><span class="line">            &lt;li class=&apos;$&#123;obj.side&#125;&apos;&gt;</span><br><span class="line">          &lt;img src=&quot;$&#123;obj.img&#125;&quot;&gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;span&gt;$&#123;obj.name&#125;&lt;/span&gt;</span><br><span class="line">            &lt;p&gt;$&#123;obj.msg&#125;&lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        `);</span><br><span class="line">        //滚动条总是在最底部</span><br><span class="line">        $(&apos;#messages&apos;).scrollTop($(&apos;#messages&apos;)[0].scrollHeight);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/node+express实现个性化聊天室/" data-id="cjt72ufdb000a44va2x4iwuda" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-map,filter,reduce的区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/map,filter,reduce的区别/" class="article-date">
  <time datetime="2019-03-13T10:27:04.188Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="map-filter-reduce的区别"><a href="#map-filter-reduce的区别" class="headerlink" title="map,filter,reduce的区别"></a>map,filter,reduce的区别</h1><ul>
<li>**smiling eyes</li>
<li>**16 Minutes</li>
<li>**November 4, 2017</li>
</ul>
<h1 id="map-filter-reduce的区别-1"><a href="#map-filter-reduce的区别-1" class="headerlink" title="map,filter,reduce的区别"></a>map,filter,reduce的区别</h1><h6 id="一张图及其形象的说明："><a href="#一张图及其形象的说明：" class="headerlink" title="一张图及其形象的说明："></a>一张图及其形象的说明：</h6><p><img src="http://ow47touqj.bkt.clouddn.com/filter_map_reduce.png" alt="知乎用户提供"></p>
<h2 id="一-map"><a href="#一-map" class="headerlink" title="一.map"></a>一.map</h2><p><strong>map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</strong><br>用一张图来说明：<br><img src="https://www.liaoxuefeng.com/files/attachments/0013879622109990efbf9d781704b02994ba96765595f56000/0" alt="来自廖雪峰的"><br>代码实例：（初学者简单的使用就好了）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let numbers = [1, 5, 10, 15];</span><br><span class="line">let doubles = numbers.map((x) =&gt; &#123;</span><br><span class="line">   return x * 2;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// doubles is now [2, 10, 20, 30]</span><br><span class="line">// numbers is still [1, 5, 10, 15]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let numbers = [1, 4, 9];</span><br><span class="line">let roots = numbers.map(Math.sqrt);</span><br><span class="line"></span><br><span class="line">// roots is now [1, 2, 3]</span><br><span class="line">// numbers is still [1, 4, 9]</span><br></pre></td></tr></table></figure>
<h5 id="map-的真正的语法："><a href="#map-的真正的语法：" class="headerlink" title="map()的真正的语法："></a>map()的真正的语法：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let array = arr.map(function callback(currentValue, index, array) &#123; </span><br><span class="line">    // Return element for new_array </span><br><span class="line">&#125;[, thisArg])</span><br></pre></td></tr></table></figure>
<p>参数说明：<br>callback 生成新数组元素的函数，使用三个参数：<br><strong>currentValue</strong><br>callback 的第一个参数，数组中正在处理的当前元素。<br><strong>index</strong><br>callback 的第二个参数，数组中正在处理的当前元素的索引。<br><strong>array</strong><br>callback 的第三个参数，map 方法被调用的数组。</p>
<p>thisArg<br>可选的。执行 callback 函数时 使用的this 值。<br>返回值<br>一个新数组，每个元素都是回调函数的结果。<br>运行说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let a = [1,2,3,4,5,2,6,10] ;</span><br><span class="line">let b =a.map(function(value,index,array)&#123;</span><br><span class="line">    console.log(value,index,array);</span><br><span class="line">&#125;)</span><br><span class="line">//1 0 [1,2,3,4,5,2,6,10]</span><br><span class="line">//2 1 [1,2,3,4,5,2,6,10]</span><br><span class="line">//3 2 [1,2,3,4,5,2,6,10]...</span><br></pre></td></tr></table></figure>
<p>暂时还不知道thisArg的用法（^-^）,所有最多用两个参数好了<br>来自微软的map说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// Define an object that contains a divisor property and</span><br><span class="line">// a remainder function.</span><br><span class="line">var obj = &#123;</span><br><span class="line">    divisor: 10,</span><br><span class="line">    remainder: function (value) &#123;</span><br><span class="line">        return value % this.divisor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Create an array.</span><br><span class="line">var numbers = [6, 12, 25, 30];</span><br><span class="line"></span><br><span class="line">// Get the remainders.</span><br><span class="line">// The obj argument specifies the this value in the callback function.</span><br><span class="line">var result = numbers.map(obj.remainder, obj);</span><br><span class="line">document.write(result);</span><br><span class="line"></span><br><span class="line">// Output:</span><br><span class="line">// 6,2,5,0</span><br></pre></td></tr></table></figure>
<p>暂时就先这样吧，以后再改<br>碰到的一个有趣的地方</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;].map(parseInt)//会得到什么?</span><br><span class="line">// 你可能觉的会是[1, 2, 3]</span><br><span class="line">//但是现实总是残酷的</span><br><span class="line">// 但实际的结果是 [1, NaN, NaN]</span><br><span class="line">// 通常使用parseInt时,只需要传递一个参数.</span><br><span class="line">// 但实际上,parseInt可以有两个参数.第二个参数是进制数.</span><br><span class="line">// 可以通过语句&quot;alert(parseInt.length)===2&quot;来验证.</span><br><span class="line">// map方法在调用callback函数时,会给它传递三个参数:当前正在遍历的元素, </span><br><span class="line">// 元素索引, 原数组本身.</span><br><span class="line">// 第三个参数parseInt会忽视, 但第二个参数不会,也就是说,</span><br><span class="line">// parseInt把传过来的索引值当成进制数来使用.从而返回了NaN.</span><br><span class="line"></span><br><span class="line">function returnInt(element) &#123;</span><br><span class="line">  return parseInt(element, 10);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;].map(returnInt); // [1, 2, 3]</span><br><span class="line">// 意料之中的结果</span><br><span class="line"></span><br><span class="line">// 也可以使用简单的箭头函数，结果同上</span><br><span class="line">[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;].map( str =&gt; parseInt(str) );</span><br><span class="line"></span><br><span class="line">// 一个更简单的方式:</span><br><span class="line">[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;].map(Number); // [1, 2, 3]</span><br><span class="line">// 与`parseInt` 不同，下面的结果会返回浮点数或指数:</span><br><span class="line">[&apos;1.1&apos;, &apos;2.2e2&apos;, &apos;3e300&apos;].map(Number); // [1.1, 220, 3e+300]</span><br></pre></td></tr></table></figure>
<h2 id="二-filter"><a href="#二-filter" class="headerlink" title="二.filter"></a>二.filter</h2><p><strong>filter() 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。</strong><br>和上面一样，直接拿代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function isBigEnough(value) &#123;</span><br><span class="line">  return value &gt;= 10;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var filtered = [12, 5, 8, 130, 44].filter(isBigEnough);</span><br><span class="line"></span><br><span class="line">// filtered is [12, 130, 44]</span><br><span class="line"></span><br><span class="line">// ES6 way</span><br><span class="line"></span><br><span class="line">const isBigEnough = value =&gt; value &gt;= 10;//很骚的函数</span><br><span class="line"></span><br><span class="line">let [...spraed]= [12, 5, 8, 130, 44];//解构赋值</span><br><span class="line"></span><br><span class="line">let filtered = spraed.filter(isBigEnough);</span><br><span class="line"></span><br><span class="line">// filtered is [12, 130, 44]</span><br></pre></td></tr></table></figure>
<p>语法可以参考map的，这里就简单说明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var new_array = arr.filter(callback[, thisArg])</span><br></pre></td></tr></table></figure>
<p><strong>callback</strong><br>用来测试数组的每个元素的函数。调用时使用参数 (<em>element</em>, <em>index</em>, <em>array</em>)。<br>返回true表示保留该元素（通过测试），false则不保留。<br><strong>thisArg</strong><br>可选。执行 callback 时的用于 this 的值。<br>返回值<br>一个新的通过测试的元素的集合的数组</p>
<h2 id="三-reduce"><a href="#三-reduce" class="headerlink" title="三.reduce"></a>三.reduce</h2><p><strong>reduce() 方法对累加器和数组中的每个元素 (从左到右)应用一个函数，将其减少为单个值。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var total = [0, 1, 2, 3].reduce(function(sum, value) &#123;</span><br><span class="line">  return sum + value;</span><br><span class="line">&#125;, 0);</span><br><span class="line">// total is 6</span><br><span class="line">//居然可以用reduce降维</span><br><span class="line">var flattened = [[0, 1], [2, 3], [4, 5]].reduce(function(a, b) &#123;</span><br><span class="line">  return a.concat(b);</span><br><span class="line">&#125;, []);</span><br><span class="line">// flattened is [0, 1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>
<p>语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.reduce(function(accumulator, currentValue, currentIndex, array), initialValue)</span><br></pre></td></tr></table></figure>
<p>说明<br>callback<br>执行数组中每个值的函数，包含四个参数<br><strong>accumulator</strong><br>上一次调用回调返回的值，或者是提供的初始值（initialValue）<br><strong>currentValue</strong><br>数组中正在处理的元素<br><strong>currentIndex</strong><br>数据中正在处理的元素索引，如果提供了 initialValue ，从0开始；否则从1开始<br><strong>array</strong><br>调用 reduce 的数组<br><strong>initialValue</strong><br>可选项，其值用于第一次调用 callback 的第一个参数。如果没有设置初始值，则将数组中的第一个元素作为初始值。空数组调用reduce时没有设置初始值将会报错。<br>返回值<br>函数累计处理的结果<br><strong>注意</strong>:<br>不提供 initialValue ，reduce 会从索引1的地方开始执行 callback 方法，跳过第一个索引。提供 initialValue ，从索引0开始。</p>
<p>如果数组为空并且没有提供initialValue， 会抛出TypeError 。如果数组仅有一个元素（无论位置如何）并且没有提供initialValue， 或者有提供initialValue但是数组为空，那么此唯一值将被返回并且callback不会被执行。</p>
<p>提供 initialValue 通常更安全，正如下面的例子，如果没有提供initialValue，则可能有三种输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var maxCallback = ( pre, cur ) =&gt; Math.max( pre.x, cur.x );</span><br><span class="line">var maxCallback2 = ( max, cur ) =&gt; Math.max( max, cur );</span><br><span class="line"></span><br><span class="line">// reduce() without initialValue</span><br><span class="line">[ &#123; x: 22 &#125;, &#123; x: 42 &#125; ].reduce( maxCallback ); // 42</span><br><span class="line">[ &#123; x: 22 &#125;            ].reduce( maxCallback ); // &#123; x: 22 &#125;</span><br><span class="line">[                      ].reduce( maxCallback ); // TypeError</span><br><span class="line"></span><br><span class="line">// map/reduce; better solution, also works for empty arrays</span><br><span class="line">[ &#123; x: 22 &#125;, &#123; x: 42 &#125; ].map( el =&gt; el.x )</span><br><span class="line">                        .reduce( maxCallback2, -Infinity );</span><br></pre></td></tr></table></figure>
<p><strong>reduce的运行</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[0, 1, 2, 3, 4].reduce(function(accumulator, currentValue, currentIndex, array)&#123;</span><br><span class="line">  return accumulator + currentValue;</span><br><span class="line">//箭头操作</span><br><span class="line">[0, 1, 2, 3, 4].reduce( (prev, curr) =&gt; prev + curr );</span><br><span class="line">//同样的结果</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>懒得弄表格了，直接上图<br><img src="http://ow47touqj.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720170922162803.png" alt="来自MDN截图"><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">相关reduce文档(来自MDN)</a><br>相信你看了这么多，应该可以简单的使用这三个函数了</p>
<h3 id="再讲一下foreach吧"><a href="#再讲一下foreach吧" class="headerlink" title="再讲一下foreach吧"></a>再讲一下foreach吧</h3><p><strong>forEach() 方法对数组的每个元素执行一次提供的函数。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let a = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];</span><br><span class="line"></span><br><span class="line">a.forEach(function(element) &#123;</span><br><span class="line">    console.log(element);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// a</span><br><span class="line">// b</span><br><span class="line">// c</span><br></pre></td></tr></table></figure>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">array.forEach(callback(currentValue, index, array)&#123;</span><br><span class="line">    //do something</span><br><span class="line">&#125;, this)</span><br><span class="line"></span><br><span class="line">array.forEach(callback[, thisArg])</span><br></pre></td></tr></table></figure>
<p>现在，你会发现foreach和map,reduce好像可以通用,的确，在某些方面你随便用哪个都可以。<br>但是，你需要知道foreach的返回值是undefined<br><strong>参数</strong><br><em>callback</em><br>为数组中每个元素执行的函数，该函数接收三个参数：<br><em>currentValue</em>(当前值)<br>数组中正在处理的当前元素。<br><em>index</em>(索引)<br>数组中正在处理的当前元素的索引。<br><em>array</em><br>forEach()方法正在操作的数组。<br>thisArg可选<br>可选参数。当执行回调 函数时用作this的值(参考对象)。<br><strong>返回值</strong><br>undefined.<br>个人不建议使用这个东西，不为什么，就任性 ;<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" target="_blank" rel="noopener">详情请参考MND文档</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/map,filter,reduce的区别/" data-id="cjt72ufd1000844vaacisagrf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS取整" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/13/JS取整/" class="article-date">
  <time datetime="2019-03-13T10:27:04.185Z" itemprop="datePublished">2019-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JS取整"><a href="#JS取整" class="headerlink" title="JS取整"></a>JS取整</h1><ul>
<li>**smiling eyes</li>
<li>**1 Minutes</li>
<li>**November 26, 2017</li>
</ul>
<p>1.丢弃小数部分,保留整数部分<br>parseInt(9/2)</p>
<p>2.向上取整,有小数就整数部分加1<br>Math.ceil(9/2)</p>
<p>3,四舍五入<br>Math.round(9/2)</p>
<p>4,向下取整<br>Math.floor(9/2)</p>
<p>5、保留小数位数<br>11.989.toFixed(2) // 11.99<br>11.984.toFixed(2) // 11.98</p>
<p>6、javascript多位数四舍五入的通用方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//num表示要四舍五入的数,v表示要保留的小数位数。</span><br><span class="line"></span><br><span class="line">function decimal(num,v) &#123;</span><br><span class="line"></span><br><span class="line">var vv = Math.pow(10,v);</span><br><span class="line"></span><br><span class="line">return Math.round(num*vv)/vv;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/13/JS取整/" data-id="cjt72ufcx000444valpeke3gc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/03/13/正则表达式/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/03/13/数组去重/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/03/13/三种标签元素的区别/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/03/13/模块接口module.exports和require/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/03/13/编译运行/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>